(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{563:function(e,t,a){"use strict";var n=a(40),r=a.n(n),o=a(5),l=a.n(o),i=a(6),s=a.n(i),c=a(9),u=a.n(c),d=a(8),p=a.n(d),m=a(4),g=a.n(m),f=a(0),b=a.n(f),v=a(1),h=a.n(v),y=a(10),E=a(564),k=a(7);var C=function(e){u()(a,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=g()(e);if(t){var r=g()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return p()(this,a)}}(a);function a(){return l()(this,a),t.apply(this,arguments)}return s()(a,[{key:"render",value:function(){var e=this.props,t=e.history,a=e.error,n=e.showMessage;if(e.showAlert&&a&&(429===a.status||500===a.status))return b.a.createElement(E.a,{title:"".concat(Object(k.f)("label.error"),": ").concat(Object(k.f)("error.somethingWentWrong")),closeModal:function(){return t.push("/")}},a.message);if(n&&a&&a.reason){var o=a.reason;if("string"==typeof o||o instanceof String)return b.a.createElement("div",{className:"alert alert-danger rounded-0"},o);if("object"===r()(o)||o instanceof Object){for(var l=[],i=0,s=Object.keys(o);i<s.length;i++){var c=s[i];l.push(b.a.createElement("div",{key:c},o[c]))}if(l.length>0)return b.a.createElement("div",{className:"alert alert-danger rounded-0"},l)}}return null}}]),a}(f.Component);C.defaultProps={showMessage:!0,showAlert:!0,error:{}},C.propTypes={history:h.a.object,showMessage:h.a.bool,showAlert:h.a.bool,error:h.a.object},t.a=Object(y.g)(C)},564:function(e,t,a){"use strict";var n=a(5),r=a.n(n),o=a(6),l=a.n(o),i=a(9),s=a.n(i),c=a(8),u=a.n(c),d=a(4),p=a.n(d),m=a(0),g=a.n(m),f=a(1),b=a.n(f),v=a(572),h=a.n(v),y=a(7);var E=function(e){s()(a,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=p()(e);if(t){var r=p()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return u()(this,a)}}(a);function a(){return r()(this,a),t.apply(this,arguments)}return l()(a,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.children,n=e.closeModal;return g.a.createElement("div",{className:"modal",tabIndex:"-1"},g.a.createElement(h.a,{contentLabel:t,className:"modal-dialog modal-dialog-centered",isOpen:!0,ariaHideApp:!1,onRequestClose:n},g.a.createElement("div",{className:"modal-content rounded-0",role:"document"},g.a.createElement("div",{className:"modal-header"},g.a.createElement("h5",{className:"modal-title"},t),g.a.createElement("button",{type:"button",className:"close","aria-label":"Close",onClick:n},g.a.createElement("span",{"aria-hidden":"true"},"×"))),g.a.createElement("div",{className:"modal-body"},a),g.a.createElement("div",{className:"modal-footer"},n&&g.a.createElement("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:n,"data-dismiss":"modal"},Object(y.f)("action.close"))))))}}]),a}(m.Component);E.propTypes={title:b.a.string,children:b.a.oneOfType([b.a.string,b.a.object]),closeModal:b.a.func},t.a=E},565:function(e,t,a){"use strict";var n=a(592),r=a.n(n),o=a(7);t.a=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.a;return n.options={fullMessages:!1},n.validators.noEmptyValue=function(e){if(""===e||"string"==typeof e&&""===e.trim()||e===[]||e==={})return Object(o.f)("validation.validators.cannotBeBlank")},n.validators.date.options={message:Object(o.f)("validation.validators.validDate")},n.validators.datetime.options={message:Object(o.f)("validation.validators.validDate")},n.validators.email.options={message:Object(o.f)("validation.validators.invalidEmail")},n.validators.equality.options={message:Object(o.f)("validation.validators.notEqual")},n.validators.exclusion.options={message:Object(o.f)("validation.validators.restricted")},n.validators.format.options={message:Object(o.f)("validation.validators.invalid")},n.validators.inclusion.options={message:Object(o.f)("validation.validators.notIncluded")},n.validators.length.options={message:Object(o.f)("validation.validators.invalid")},n.validators.numericality.options={message:Object(o.f)("validation.validators.invalid")},n.validators.presence.options={message:Object(o.f)("validation.validators.cannotBeBlank")},n.validators.url.options={message:Object(o.f)("validation.validators.invalidURL")},n(e,t,a)}},568:function(e,t,a){"use strict";var n=a(5),r=a.n(n),o=a(6),l=a.n(o),i=a(9),s=a.n(i),c=a(8),u=a.n(c),d=a(4),p=a.n(d),m=a(0),g=a.n(m),f=a(1),b=a.n(f),v=a(10),h=a(574),y=a.n(h),E=a(594),k=a.n(E);var C=function(e){s()(a,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=p()(e);if(t){var r=p()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return u()(this,a)}}(a);function a(){return r()(this,a),t.apply(this,arguments)}return l()(a,[{key:"render",value:function(){var e=this.props,t=e.history,a=e.path,n=e.message,r=y.a.parse(t.location.search);return n&&!0===k()(r,a)?g.a.createElement("div",{className:"alert alert-success rounded-0"},n):null}}]),a}(m.Component);C.propTypes={history:b.a.object,path:b.a.object,message:b.a.oneOfType([b.a.string,b.a.object])},t.a=Object(v.g)(C)},584:function(e,t,a){"use strict";var n=a(5),r=a.n(n),o=a(6),l=a.n(o),i=a(9),s=a.n(i),c=a(8),u=a.n(c),d=a(4),p=a.n(d),m=a(0),g=a.n(m),f=a(1),b=a.n(f),v=a(572),h=a.n(v),y=a(7);var E=function(e){s()(a,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=p()(e);if(t){var r=p()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return u()(this,a)}}(a);function a(){return r()(this,a),t.apply(this,arguments)}return l()(a,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.children,n=e.actionButtonLabel,r=e.actionButtonFunc,o=e.actionDangerous,l=e.actionDisabled,i=e.actionLinkLabel,s=e.actionLinkFunc,c=e.actionLinkHidden,u=e.actionLinkDisabled,d=e.closeModal,p=e.closeModalDisabled;return g.a.createElement("div",{className:"modal",tabIndex:"-1"},g.a.createElement(h.a,{contentLabel:t,className:"modal-dialog modal-dialog-centered",isOpen:!0,ariaHideApp:!1,onRequestClose:d},g.a.createElement("div",{className:"modal-content rounded-0",role:"document"},g.a.createElement("div",{className:"modal-header"},g.a.createElement("h5",{className:"modal-title"},t),g.a.createElement("button",{type:"button",className:"close","aria-label":"Close",onClick:d},g.a.createElement("span",{"aria-hidden":"true"},"×"))),g.a.createElement("div",{className:"modal-body"},a),g.a.createElement("div",{className:"modal-footer"},i&&!c&&g.a.createElement("button",{type:"button",className:"btn btn-link btn-sm mr-auto",onClick:s,disabled:u},i),n&&g.a.createElement("button",{type:"button",className:"btn ".concat(1==o?"btn-danger":"btn-primary"," btn-sm"),onClick:r,disabled:l},n),d&&g.a.createElement("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:d,"data-dismiss":"modal",disabled:p},Object(y.f)("action.close"))))))}}]),a}(m.Component);E.propTypes={title:b.a.string,children:b.a.oneOfType([b.a.string,b.a.object]),actionButtonLabel:b.a.string,actionButtonFunc:b.a.func,actionDangerous:b.a.bool,actionDisabled:b.a.bool,actionLinkLabel:b.a.string,actionLinkFunc:b.a.func,actionLinkHidden:b.a.bool,actionLinkDisabled:b.a.bool,closeModal:b.a.func,closeModalDisabled:b.a.bool},t.a=E},586:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"d",(function(){return l})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return s}));var n=a(7),r=a(2);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"post",t="patch"!=e;return{name:{presence:t,noEmptyValue:!0,length:{maximum:255}},description:{presence:t,noEmptyValue:!1,length:{maximum:255}}}}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"post",t="patch"!=e;return{defaultLanguage:{presence:t,noEmptyValue:!0,inclusion:{within:r.RESTRICTED_LANGUAGES}}}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"post",t="patch"!=e;return{logoImage:{presence:t,format:{pattern:"^$|[0-9]*_[0-9]*_[0-9]*.[a-z]+$",flags:"i",message:Object(n.f)("validation.validators.validKey")}},backgroundImage:{presence:t,format:{pattern:"^$|[0-9]*_[0-9]*_[0-9]*.[a-z]+$",flags:"i",message:Object(n.f)("validation.validators.validKey")}},backgroundColor:{presence:t,noEmptyValue:!0,format:{pattern:"^#[0-9A-F]{6}$",flags:"i",message:Object(n.f)("validation.validators.validHex")}},primaryColor:{presence:t,noEmptyValue:!0,format:{pattern:"^#[0-9A-F]{6}$",flags:"i",message:Object(n.f)("validation.validators.validHex")}},secondaryColor:{presence:t,noEmptyValue:!0,format:{pattern:"^#[0-9A-F]{6}$",flags:"i",message:Object(n.f)("validation.validators.validHex")}}}}function s(){return{workspaceURL:{presence:{allowEmpty:!1},format:{pattern:"[a-z0-9]+",flags:"i",message:Object(n.f)("validation.validators.validCharactersAZ09")},exclusion:{within:r.RESTRICTED_DOMAINS,message:Object(n.f)("validation.validators.validWorkspaceURL")},length:{maximum:255}},accountPassword:{presence:{allowEmpty:!1},length:{minimum:6,maximum:66,message:Object(n.f)("validation.validators.invalidPasswordLength")}}}}},619:function(e,t,a){"use strict";var n=a(33),r=a.n(n),o=a(0),l=a.n(o);t.a=function(e){return l.a.createElement("svg",r()({},e,{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}),l.a.createElement("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.a.createElement("polyline",{points:"17 8 12 3 7 8"}),l.a.createElement("line",{x1:"12",x2:"12",y1:"3",y2:"15"}))}},649:function(e,t,a){"use strict";var n=a(33),r=a.n(n),o=a(5),l=a.n(o),i=a(6),s=a.n(i),c=a(20),u=a.n(c),d=a(9),p=a.n(d),m=a(8),g=a.n(m),f=a(4),b=a.n(f),v=a(0),h=a.n(v),y=a(1),E=a.n(y),k=a(650),C=a.n(k),S=a(7),I=a(619);var O=function(e){p()(a,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=b()(e);if(t){var r=b()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return g()(this,a)}}(a);function a(e){var n;return l()(this,a),(n=t.call(this,e)).state={files:null,errors:null},n.fileUploadSuccess=n.fileUploadSuccess.bind(u()(n)),n.fileUploadError=n.fileUploadError.bind(u()(n)),n.removeFile=n.removeFile.bind(u()(n)),n.removeError=n.removeError.bind(u()(n)),n.showErrorMessage=n.showErrorMessage.bind(u()(n)),n}return s()(a,[{key:"fileUploadSuccess",value:function(e){this.props.disabled||this.setState({files:e}),this.props.fileUploadChange&&this.props.fileUploadChange(e,this.state.errors)}},{key:"fileUploadError",value:function(e){this.props.disabled||this.setState({errors:e}),this.props.fileUploadChange&&this.props.fileUploadChange(this.state.files,e)}},{key:"removeFile",value:function(e){if(e.preventDefault(),!this.props.disabled){var t=this.state.files.filter((function(t){return t.id!==e.target.value}));this.setState({files:t}),this.props.fileUploadChange&&this.props.fileUploadChange(t,this.state.errors)}}},{key:"removeError",value:function(e){if(e.preventDefault(),!this.props.disabled){var t=this.state.errors.filter((function(t){return t.id!==e.target.value}));this.setState({errors:t}),this.props.fileUploadChange&&this.props.fileUploadChange(this.state.files,t)}}},{key:"showErrorMessage",value:function(e){var t=null;switch(e){case"unsupportedFileType":t=Object(S.f)("inputs.fileUploader.unsupportedFileType");break;case"maxSizeExceeded":t=Object(S.f)("inputs.fileUploader.maxSizeExceeded",{maxFileSize:this.props.maximumFileSize});break;case"multipleMaxCountExceeded":t=Object(S.f)("inputs.fileUploader.multipleMaxCountExceeded",{maximumFiles:this.props.multipleMaximumCount});break;case"multipleMaxSizeExceeded":t=Object(S.f)("inputs.fileUploader.multipleMaxSizeExceeded",{maxFileSize:this.props.multipleMaximumFileSize});break;case"multipleNotAllowed":t=Object(S.f)("inputs.fileUploader.multipleNotAllowed",{count:1});break;default:t=Object(S.f)("label.error")}return t}},{key:"render",value:function(){var e=this,t=this.props,a=t.acceptedFormats,n=t.multiple,o=t.imagePreview,l=t.maximumFileSize,i=t.multipleMaximumFileSize,s=t.multipleMaximumCount,c=t.disabled,u=this.state,d=u.files,p=u.errors,m=o&&d&&d.length>0&&d[0].src&&d[0].src.base64;return h.a.createElement(C.a,{multiple:n,maxSize:l,convertToBase64:o,multipleMaxSize:i,multipleMaxCount:s,accept:a,onSuccess:this.fileUploadSuccess,onError:this.fileUploadError},(function(t){var a=t.browseFiles,l=t.getDropZoneProps;return h.a.createElement("div",{id:"file-input"},h.a.createElement("div",r()({className:"drop-zone"},l()),h.a.createElement("div",{className:"drop-window d-flex p-2 bg-light border light"},h.a.createElement("div",{className:"no-files w-100 text-center"},m&&h.a.createElement("div",{className:"w-100 text-center"},h.a.createElement("img",{src:d[0].src.base64,className:"img-fluid img-thumbnail mb-3",style:{maxHeight:"30vh"}})),!m&&h.a.createElement(v.Fragment,null,h.a.createElement(I.a,{className:"text-primary my-2",width:"1.5em",height:"1.5em"}),h.a.createElement("div",{className:"my-2"},n?o?Object(S.f)("inputs.fileUploader.dragDropImage_plural"):Object(S.f)("inputs.fileUploader.dragDropFile_plural"):o?Object(S.f)("inputs.fileUploader.dragDropImage"):Object(S.f)("inputs.fileUploader.dragDropFile"))),h.a.createElement("button",{className:"btn btn-outline-primary btn-sm my-2",onClick:a,disabled:c},Object(S.f)("label.browse")))),h.a.createElement("div",{className:"file-list"},d&&d.map((function(t){return h.a.createElement("div",{key:t.name,className:"file alert border light rounded-0 my-2 p-2"},t.name,h.a.createElement("button",{type:"button",className:"close",value:t.id,onClick:e.removeFile,"data-dismiss":"alert","aria-label":Object(S.f)("action.close")},"×"))})),p&&p.map((function(t){return h.a.createElement("div",{key:t.id,className:"error alert border-danger rounded-0 my-2 p-2"},h.a.createElement("button",{type:"button",className:"close",value:t.id,onClick:e.removeError,"data-dismiss":"alert","aria-label":Object(S.f)("action.close")},"×"),t.file&&t.file.name,t.file&&h.a.createElement("br",null),e.showErrorMessage(t.type))})))))}))}}]),a}(v.Component);O.propTypes={acceptedFormats:E.a.array.isRequired,multiple:E.a.bool.isRequired,imagePreview:E.a.bool,maximumFileSize:E.a.string,multipleMaximumFileSize:E.a.string,multipleMaximumCount:E.a.number,fileUploadChange:E.a.func,disabled:E.a.bool},t.a=O},800:function(e,t,a){e.exports=a.p+"/images/empty_image.svg"},942:function(e,t,a){"use strict";a.r(t);var n=a(93),r=a.n(n),o=a(32),l=a.n(o),i=a(5),s=a.n(i),c=a(6),u=a.n(c),d=a(20),p=a.n(d),m=a(9),g=a.n(m),f=a(8),b=a.n(f),v=a(4),h=a.n(v),y=a(67),E=a.n(y),k=a(0),C=a.n(k),S=a(1),I=a.n(S),O=a(39),j=a(54),U=a(24),x=a(10),R=a(2),M=a(7),L=a(565),N=a(586),w=a(11),F=a(23),D=a(601);var P=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=h()(e);if(t){var r=h()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return b()(this,a)}}(n);function n(){return s()(this,n),t.apply(this,arguments)}return u()(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.id,r=t.name,o=t.activeImage,l=t.imagePreview,i=t.label,s=t.required,c=t.smallText,u=t.disabled,d=t.error,p=l&&l.files&&l.files.length>0&&l.files[0].src&&l.files[0].src.base64;return C.a.createElement("div",{className:"form-group"},i&&C.a.createElement("label",{htmlFor:n},i," ",s&&"*"),C.a.createElement("div",{className:"input-group"},C.a.createElement("div",{className:"image-container border light rounded-0",style:{cursor:u?"not-allowed":"pointer"},onClick:function(){return!u&&e.props.onClick(r)}},p?C.a.createElement("img",{src:l.files[0].src.base64}):C.a.createElement("img",{src:o||a(800)})),d&&d[r]&&C.a.createElement("div",{className:"d-block invalid-feedback"},d[r][0]),c&&C.a.createElement("div",{className:"w-100 text-muted"},C.a.createElement("small",null,c))))}}]),n}(k.Component);P.propTypes={id:I.a.string,name:I.a.string,activeImage:I.a.string,imagePreview:I.a.object,label:I.a.string,onClick:I.a.func,required:I.a.bool,smallText:I.a.string,disabled:I.a.bool,error:I.a.object};var T=P,A=a(913);var _=function(e){g()(a,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=h()(e);if(t){var r=h()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return b()(this,a)}}(a);function a(){var e;s()(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),l()(p()(e),"state",{displayColorPicker:!1}),l()(p()(e),"handleClick",(function(){e.props.disabled||e.setState({displayColorPicker:!e.state.displayColorPicker})})),l()(p()(e),"handleClose",(function(){e.setState({displayColorPicker:!1})})),l()(p()(e),"handleChange",(function(t){e.props.disabled||(t.target&&Object(w.f)(t.target.value)?e.props.onChange({name:e.props.name,color:t.target.value||""}):e.props.onChange({name:e.props.name,color:t.hex||""}))})),e}return u()(a,[{key:"render",value:function(){var e=this.props,t=e.id,a=e.name,n=e.value,r=e.label,o=e.required,l=e.smallText,i=e.disabled,s=e.error;return C.a.createElement("div",{className:"form-group"},r&&C.a.createElement("label",{htmlFor:t},r," ",o&&"*"),C.a.createElement("div",{className:"input-group"},C.a.createElement("div",{className:"color-picker"},C.a.createElement("div",{className:"row mx-0"},C.a.createElement("div",{className:"color-window",style:{cursor:i?"not-allowed":"pointer"},onClick:this.handleClick},C.a.createElement("div",{className:"color",style:{background:n}})),C.a.createElement("div",{className:"input-group-append"},C.a.createElement("input",{className:"form-control text-uppercase rounded-0",name:a,maxLength:"7",disabled:i,value:n,onChange:this.handleChange}))),this.state.displayColorPicker?C.a.createElement("div",{className:"type-selector mt-1"},C.a.createElement("div",{className:"background-cover",onClick:this.handleClose}),C.a.createElement(A.a,{name:a,color:n,onChange:this.handleChange,disableAlpha:!0,disabled:i})):null),s&&s[a]&&C.a.createElement("div",{className:"d-block invalid-feedback"},s[a][0]),l&&C.a.createElement("div",{className:"w-100 text-muted"},C.a.createElement("small",null,l))))}}]),a}(k.Component);_.propTypes={id:I.a.string,name:I.a.string,value:I.a.string,label:I.a.string,onChange:I.a.func,required:I.a.bool,smallText:I.a.string,disabled:I.a.bool,error:I.a.object};var B=_,z=a(584),H=a(649),q=a(568),G=a(563);function V(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function X(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?V(Object(a),!0).forEach((function(t){l()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):V(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var $=function(e){g()(n,e);var t,a=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=h()(e);if(t){var r=h()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return b()(this,a)}}(n);function n(e){var t;return s()(this,n),(t=a.call(this,e)).state={loading:!1,logoImageModal:!1,backgroundImageModal:!1,logoImage:"",logoImageURL:"",logoImageUpload:null,backgroundImage:"",backgroundImageURL:"",backgroundImageUpload:null,tempFileUpload:{},backgroundColor:"",primaryColor:"",secondaryColor:"",validationErrors:null,serverError:null},t.openModal=t.openModal.bind(p()(t)),t.closeModal=t.closeModal.bind(p()(t)),t.setEditableFields=t.setEditableFields.bind(p()(t)),t.selectColor=t.selectColor.bind(p()(t)),t.storeImage=t.storeImage.bind(p()(t)),t.fileUploaded=t.fileUploaded.bind(p()(t)),t.saveClientStyling=t.saveClientStyling.bind(p()(t)),t.deleteExistingPhoto=t.deleteExistingPhoto.bind(p()(t)),t}return u()(n,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this._isMounted&&this.setState({loading:!0,validationErrors:null,serverError:null}),this.props.loadClientStyling().then((function(t){t.type!==D.c?e._isMounted&&e.setEditableFields(t.payload.clientStyling):e._isMounted&&e.setState({serverError:t.payload})}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"setEditableFields",value:function(e){this.setState({logoImage:e.logoImage,logoImageURL:e.logoImageURL,logoImageUpload:null,backgroundImage:e.backgroundImage,backgroundImageURL:e.backgroundImageURL,backgroundImageUpload:null,backgroundColor:e.backgroundColor,primaryColor:e.primaryColor,secondaryColor:e.secondaryColor,loading:!1})}},{key:"openModal",value:function(e){this._isMounted&&("logoImage"===e?this.setState({logoImageModal:!0}):"backgroundImage"===e&&this.setState({backgroundImageModal:!0}))}},{key:"closeModal",value:function(e){e.preventDefault(),this._isMounted&&this.setState({logoImageModal:!1,backgroundImageModal:!1,tempFileUpload:{}})}},{key:"selectColor",value:function(e){this.setState(l()({},e.name,e.color))}},{key:"storeImage",value:function(e){if(this._isMounted){var t={logoImageModal:!1,backgroundImageModal:!1,tempFileUpload:{}};"logoImage"===e?t.logoImageUpload=X({},this.state.tempFileUpload):"backgroundImage"===e&&(t.backgroundImageUpload=X({},this.state.tempFileUpload)),this.setState(t)}}},{key:"fileUploaded",value:function(e,t){this._isMounted&&this.setState({tempFileUpload:{files:e,errors:t}})}},{key:"deleteExistingPhoto",value:function(e){if(this._isMounted){var t={logoImageModal:!1,backgroundImageModal:!1,tempFileUpload:{}};"logoImage"===e?(t.logoImage="",t.logoImageURL="",t.logoImageUpload=null):"backgroundImage"===e&&(t.backgroundImage="",t.backgroundImageURL="",t.backgroundImageUpload=null),this.setState(t)}}},{key:"isSaveImagePossible",value:function(e,t){return!(!Array.isArray(e)||Array.isArray(e)&&1!==e.length||Array.isArray(t)&&t.length>0)}},{key:"saveClientStyling",value:(t=r()(E.a.mark((function e(t){var a,n,r,o,l,i,s,c,u,d,p,m,g,f=this;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),this._isMounted&&this.setState({loading:!0,validationErrors:null,serverError:null}),a={logoImage:this.state.logoImage,backgroundImage:this.state.backgroundImage,backgroundColor:this.state.backgroundColor,primaryColor:this.state.primaryColor,secondaryColor:this.state.secondaryColor},null==(n=Object(L.a)(a,Object(N.c)()))){e.next=7;break}return this._isMounted&&this.setState({loading:!1,validationErrors:n}),e.abrupt("return");case 7:if(r=null,null===this.state.logoImageUpload){e.next=31;break}if(o={files:this.state.logoImageUpload.files,errors:this.state.logoImageUpload.errors},0!=this.isSaveImagePossible(o.files,o.errors)){e.next=14;break}return this.setState({loading:!1}),e.abrupt("return");case 14:if((l=o.files[0].src.file)instanceof File){e.next=18;break}return this.setState({loading:!1}),e.abrupt("return");case 18:return e.next=20,this.props.generateSignedURL({contentType:l.type});case 20:if((r=e.sent).type!==D.h){e.next=26;break}return this.setState({loading:!1,serverError:r.payload}),e.abrupt("return");case 26:return i=r.key,e.next=29,this.props.uploadToSignedURL({signedURL:decodeURI(r.signedURL),contentType:l.type,data:l});case 29:(s=e.sent).type===D.h?this.setState({loading:!1,serverError:s}):a.logoImage=i;case 31:if(c=null,null===this.state.backgroundImageUpload){e.next=55;break}if(u={files:this.state.backgroundImageUpload.files,errors:this.state.backgroundImageUpload.errors},0!=this.isSaveImagePossible(u.files,u.errors)){e.next=38;break}return this.setState({loading:!1}),e.abrupt("return");case 38:if((d=u.files[0].src.file)instanceof File){e.next=42;break}return this.setState({loading:!1}),e.abrupt("return");case 42:return e.next=44,this.props.generateSignedURL({contentType:d.type});case 44:if((c=e.sent).type!==D.h){e.next=50;break}return this.setState({loading:!1,serverError:c.payload}),e.abrupt("return");case 50:return p=c.key,e.next=53,this.props.uploadToSignedURL({signedURL:decodeURI(c.signedURL),contentType:d.type,data:d});case 53:(m=e.sent).type===D.h?this.setState({loading:!1,serverError:m}):a.backgroundImage=p;case 55:g=Object(w.e)(a,this.props.clientStyling),null!=Object(L.a)(g,Object(N.c)("patch"))?this._isMounted&&this.setState({loading:!1,validationErrors:n}):this.props.updateClientStyling(g).then((function(e){e.type===D.h?f._isMounted&&f.setState({loading:!1,serverError:e.payload}):f._isMounted&&f.props.loadClientStyling().then((function(e){e.type!==D.c?f.props.loadUser().then((function(e){if(e.type===F.c)return f.setState({loading:!1}),void window.location.reload;f.setState({loading:!1}),f.props.history.push("/settings/appearance?updatestyling=success")})):f._isMounted&&f.setState({serverError:e.payload})}))}));case 58:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.props,a=t.loadClientStylingStatus,n=t.updateClientStylingStatus,r=this.state,o=r.logoImageURL,l=r.backgroundImageURL,i=r.backgroundColor,s=r.primaryColor,c=r.secondaryColor,u=r.logoImageUpload,d=r.backgroundImageUpload,p=r.tempFileUpload,m=r.logoImageModal,g=r.backgroundImageModal,f=r.loading,b=r.validationErrors,v=r.serverError,h=f||a==R.REDUX_STATE.PENDING||n==R.REDUX_STATE.PENDING,y=!p||!Array.isArray(p.files)||Array.isArray(p.files)&&1!==p.files.length||Array.isArray(p.errors)&&p.errors.length>0,E=n===R.REDUX_STATE.FULFILLED&&!v&&!b;return C.a.createElement("div",null,C.a.createElement("h1",null,Object(M.f)("components.settings.appearance.appearanceAndBranding")),C.a.createElement("div",{className:"card rounded-0 my-3 text-left"},C.a.createElement("div",{className:"card-body"},E&&C.a.createElement(q.a,{path:{updatestyling:"success"},message:Object(M.f)("success.updateClientStyling")}),C.a.createElement(G.a,{error:v}),C.a.createElement(B,{label:Object(M.f)("components.settings.appearance.primaryColor"),name:"primaryColor",id:"primary-color",value:s,onChange:this.selectColor,smallText:Object(M.f)("components.settings.appearance.primaryColorDescription"),disabled:h,error:b}),C.a.createElement(B,{label:Object(M.f)("components.settings.appearance.secondaryColor"),name:"secondaryColor",id:"secondary-color",value:c,onChange:this.selectColor,smallText:Object(M.f)("components.settings.appearance.secondaryColorDescription"),disabled:h,error:b}),m&&C.a.createElement(z.a,{title:Object(M.f)("components.settings.appearance.selectLogoImage"),actionButtonLabel:Object(M.f)("action.continue"),actionButtonFunc:function(){return e.storeImage("logoImage")},actionDisabled:y,actionLinkLabel:Object(M.f)("components.settings.appearance.deleteExistingImage"),actionLinkFunc:function(){return e.deleteExistingPhoto("logoImage")},actionLinkHidden:!(u&&u.files||""!==o),closeModal:this.closeModal},C.a.createElement(k.Fragment,null,C.a.createElement(H.a,{acceptedFormats:["image/jpg","image/jpeg","image/png"],multiple:!1,imagePreview:!0,fileUploadChange:this.fileUploaded,maximumFileSize:R.MAX_FILE_UPLOAD_SIZE.LOGO_IMAGE,disabled:!1}))),C.a.createElement(T,{label:Object(M.f)("components.settings.appearance.logoImage"),name:"logoImage",id:"logo-image",activeImage:o,imagePreview:u,onClick:this.openModal,smallText:Object(M.f)("components.settings.appearance.logoImageDescription"),disabled:h,error:b}),g&&C.a.createElement(z.a,{title:Object(M.f)("components.settings.appearance.selectBackgroundImage"),actionButtonLabel:Object(M.f)("action.continue"),actionButtonFunc:function(){return e.storeImage("backgroundImage")},actionDisabled:y,actionLinkLabel:Object(M.f)("components.settings.appearance.deleteExistingImage"),actionLinkFunc:function(){return e.deleteExistingPhoto("backgroundImage")},actionLinkHidden:!(d&&d.files||""!==l),closeModal:this.closeModal},C.a.createElement(k.Fragment,null,C.a.createElement(H.a,{acceptedFormats:["image/jpg","image/jpeg","image/png"],multiple:!1,imagePreview:!0,fileUploadChange:this.fileUploaded,maximumFileSize:R.MAX_FILE_UPLOAD_SIZE.BACKGROUND_IMAGE,disabled:!1}))),C.a.createElement(T,{label:Object(M.f)("components.settings.appearance.backgroundImage"),name:"backgroundImage",id:"background-image",activeImage:l,imagePreview:d,onClick:this.openModal,smallText:Object(M.f)("components.settings.appearance.backgroundImageDescription"),disabled:h,error:b}),C.a.createElement(B,{label:Object(M.f)("components.settings.appearance.backgroundColor"),name:"backgroundColor",id:"background-color",value:i,onChange:this.selectColor,smallText:Object(M.f)("components.settings.appearance.backgroundColorDescription"),disabled:h,error:b}),C.a.createElement("button",{type:"submit",className:"btn btn-primary btn-sm btn-block mt-4 p-3",onClick:this.saveClientStyling,disabled:h},Object(M.f)("action.update")))),C.a.createElement("div",{className:"ml-4"},C.a.createElement(U.b,{to:{pathname:"/settings/appearance/confirm-reset"}},C.a.createElement("span",null,Object(M.f)("components.settings.appearance.resetAppearance")))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.loadClientStylingStatus===t.loadClientStylingStatus?null:e.loadClientStylingStatus===R.REDUX_STATE.FULFILLED?{loadClientStylingStatus:R.REDUX_STATE.FULFILLED}:null}}]),n}(k.Component);$.propTypes={history:I.a.object,clientStyling:I.a.object,loadUser:I.a.func,generateSignedURL:I.a.func,uploadToSignedURL:I.a.func,loadClientStyling:I.a.func,loadClientStylingStatus:I.a.string,updateClientStyling:I.a.func,updateClientStylingStatus:I.a.string},t.default=Object(x.g)(Object(j.b)((function(e){return{loadClientStylingStatus:e.getIn([D.f,"loadClientStyling","status"]),updateClientStylingStatus:e.getIn([D.f,"updateClientStyling","status"]),clientStyling:e.getIn([D.f,"loadClientStyling","payload","clientStyling"])}}),(function(e){return{loadUser:Object(O.b)(F.m,e),generateSignedURL:Object(O.b)(D.l,e),uploadToSignedURL:Object(O.b)(D.t,e),loadClientStyling:Object(O.b)(D.n,e),updateClientStyling:Object(O.b)(D.r,e)}}))($))}}]);