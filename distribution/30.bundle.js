(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{927:function(e,t,a){"use strict";a.r(t);var s=a(28),r=a.n(s),n=a(4),o=a.n(n),c=a(5),l=a.n(c),i=a(27),d=a.n(i),u=a(17),p=a.n(u),b=a(16),m=a.n(b),w=a(7),v=a.n(w),h=a(0),f=a.n(h),g=a(3),E=a.n(g),y=a(81),L=a(52),R=a(69),j=a(6),k=a(63),O=a(555),P=a(564),U=a.n(P),S=a(18),F=a(2),D=a(583),N=a(611),C=a(35),I=a(626),T=a(612),x=a(34),A=a(65),X=a(559),_=a(553),W=a(560);var B=function(e){p()(s,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,s=v()(e);if(t){var r=v()(this).constructor;a=Reflect.construct(s,arguments,r)}else a=s.apply(this,arguments);return m()(this,a)}}(s);function s(e){var a;return o()(this,s),(a=t.call(this,e)).state={password:"",verifyPassword:"",code:"",workspaceURL:"",loading:!1,disabled:!1,visible:!1,validationErrors:null,serverError:null},a.changeField=a.changeField.bind(d()(a)),a.reset=a.reset.bind(d()(a)),a}return l()(s,[{key:"componentDidMount",value:function(){var e=this,t=Object(D.a)(window.location.href);this.props.workspaceURLStatus!==F.REDUX_STATE.FULFILLED&&this.props.validateWorkspaceURL(t).then((function(t){if(t.type!==x.i){var a=t.payload.defaultLanguage,s=Object(S.c)();!Object(C.f)(s)&&Object(C.f)(a)&&Object(S.a)()!==a&&e.props.changeLanguage(a)}else{var r="".concat("https","://").concat("buildar.live","/");window.location.replace(r)}}));var a=U.a.parse(this.props.history.location.hash);null!==a.code&&this.props.validateResetPasswordCode({code:a.code,workspaceURL:t}).then((function(t){t.type===x.h&&e.setState({serverError:t.payload,disabled:!0})}))}},{key:"changeField",value:function(e){this.setState(r()({},e.target.name,e.target.value))}},{key:"reset",value:function(e){var t=this;e.preventDefault(),this.setState({loading:!0,validationErrors:null,serverError:null});var a={password:this.state.password,verifyPassword:this.state.verifyPassword,code:this.state.code,workspaceURL:this.state.workspaceURL},s=Object(O.a)(a,Object(N.d)());null!=s?this.setState({loading:!1,validationErrors:s}):this.props.resetUserPassword(a).then((function(e){e.type===x.g?t.setState({loading:!1,serverError:e.payload}):t.props.history.replace("/signin?reset=success")}))}},{key:"render",value:function(){var e=this.state,t=e.password,s=e.verifyPassword,r=e.loading,n=e.disabled,o=e.validationErrors,c=e.serverError,l=this.props,i=l.workspaceURLStatus,d=l.resetPasswordStatus,u=l.clientStyle,p=null==i||i==F.REDUX_STATE.PENDING,b=d==F.REDUX_STATE.FULFILLED&&!c&&!o,m=Object(T.a)(i,u);return f.a.createElement(h.Fragment,null,f.a.createElement(k.Helmet,{title:Object(S.e)("headers.reset.title"),meta:[{name:"description",content:Object(S.e)("headers.reset.description")}]}),f.a.createElement("div",{className:"form-container col-xs-12 col-md-6 col-lg-5 d-flex flex-column hidden-md-down ".concat(m.links)},f.a.createElement("div",{id:"reset"},f.a.createElement("div",{className:"p-3 p-sm-5 alignment vertical justify-content-center"},f.a.createElement("form",{className:"w-100"},f.a.createElement("div",{className:"w-100 text-center mt-4 mb-4"},f.a.createElement("span",{className:"logo"},!p&&f.a.createElement("img",{src:u&&u.get("logoImage")||a(701)}))),b&&f.a.createElement(X.a,{path:{reset:"success"},message:Object(S.e)("success.resetPassword")}),f.a.createElement(_.a,{error:c}),f.a.createElement("div",{className:"w-100 mt-3 mb-3"},f.a.createElement("span",{className:"h3"}," ",Object(S.e)("label.resetPassword")," ")),f.a.createElement("div",{className:"mt-4 mb-4"},f.a.createElement("span",null,Object(S.e)("components.authentication.resetPassword.description"))),f.a.createElement(W.a,{label:Object(S.e)("label.password"),name:"password",id:"password-input",value:t,type:Object(S.e)("label.password"),ariaLabel:Object(S.e)("label.password"),onChange:this.changeField,disabled:r||n,error:o}),f.a.createElement(W.a,{label:Object(S.e)("label.verifyPassword"),name:"verifyPassword",id:"verify-password-input",value:s,type:"password",ariaLabel:Object(S.e)("label.verifyPassword"),onChange:this.changeField,disabled:r||n,error:o}),f.a.createElement("button",{type:"submit",className:"btn btn-primary btn-lg btn-block mt-4 p-3 ".concat(m.button),onClick:this.reset,disabled:r||n},Object(S.e)("label.resetPassword")),f.a.createElement("div",{className:"mt-4"},Object(S.e)("components.authentication.noReset")," ",f.a.createElement(R.b,{to:{pathname:"/signin"}},Object(S.e)("action.signIn"))),f.a.createElement(I.a,null))))),f.a.createElement("div",{className:"background-container col-md-6 col-lg-7 ".concat(m.background)}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.workspaceURLStatus===t.workspaceURLStatus&&e.validateResetPasswordCodeStatus===t.validateResetPasswordCodeStatus)return null;var a={};if(e.workspaceURLStatus===F.REDUX_STATE.FULFILLED){var s=Object(D.a)(window.location.href);a.workspaceURL=s}if(e.validateResetPasswordCodeStatus===F.REDUX_STATE.FULFILLED){var r=U.a.parse(e.history.location.hash);a.code=r.code}return a}}]),s}(h.Component);B.propTypes={history:E.a.object,validateWorkspaceURL:E.a.func,validateResetPasswordCode:E.a.func,resetUserPassword:E.a.func,workspaceURLStatus:E.a.string,resetPasswordStatus:E.a.string,clientStyle:E.a.object,changeLanguage:E.a.func},t.default=Object(j.g)(Object(y.b)((function(e){return{workspaceURLStatus:e.getIn([x.a,"workspaceURL","status"]),validateResetPasswordCodeStatus:e.getIn([x.a,"resetPasswordCode","status"]),resetPasswordStatus:e.getIn([x.a,"resetPassword","status"]),clientStyle:e.getIn([x.a,"workspaceURL","payload"])}}),(function(e){return{validateWorkspaceURL:Object(L.b)(x.s,e),validateResetPasswordCode:Object(L.b)(x.r,e),resetUserPassword:Object(L.b)(x.q,e),changeLanguage:Object(L.b)(A.c,e)}}))(B))}}]);